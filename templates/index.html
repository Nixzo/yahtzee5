{% include 'header.html' %} {% if game_over_message %}
<div class="row">
  <div class="col-lg-12">
    <div class="alert alert-success" role="alert">{{ game_over_message }}</div>
    <form method="POST" action="/save_score">
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Enter your name to save your score!" name="player_name" required />
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="submit">Save Score!</button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endif %}
<div class="row">
  <div class="col-lg-7">
    <div>
      <h1>Best hand: {{ top_score }}</h1>
    </div>
    <div class="main-container-hand px-3 d-flex justify-content-center align-items-center">
      <form method="POST" style="display: flex; flex-direction: column; align-items: center">
        <div style="display: flex; flex-direction: row; justify-content: center; align-items: center">
          {% for i in range(hand.dice|length) %}
          <div style="display: flex; flex-direction: column; align-items: center; margin-right: 10px">
            <img
              src="{{ url_for('static', filename='img/' + hand.dice[i].get_name() + '.png') }}"
              alt="{{ hand.dice[i].get_name() }}"
              style="max-width: 100px; max-height: 100px; padding: 10px"
              onclick="document.getElementById('die{{i}}').click();" />
            <input type="checkbox" id="die{{i}}" name="dice" value="{{i}}" {% if game_over_message %}disabled{% endif %} />
            <label for="die{{i}}">{{ hand.dice[i] }}</label>
          </div>
          {% endfor %}
        </div>
        <input
          type="submit"
          value="Reroll{% if session['rerolls'] == 0 %}{% else %} ({{ session['rerolls']}}){% endif %}"
          style="margin-top: 10px"
          {%if game_over_message%}
          disabled
          {%endif%}
        />
      </form>
    </div>
  </div>
  <div class="col-lg-5">
    <div id="rules">
      <h1>Total points: {{ total_points }}</h1>
      <form method="POST">
        <table>
          <tr>
            <th class="px-2">Choose</th>
            <th class="px-2">Worth</th>
            <th class="px-2">Rule</th>
            <th class="px-2">Already Scored</th>
          </tr>
          {% for rule in rules %}
          <tr>
            <td class="px-2">
              <input type="radio" name="rule" value="{{ rule.name }}" {% if rule.name in already_scored %}disabled{% endif %} />
            </td>
            <td class="px-2">{{ rule.points }}</td>
            <td class="px-2 {% if rule.name in already_scored %}disabled-rule{% endif %}">{{ rule.name }}</td>
            <td class="px-2 text-end">{{ already_scored.get(rule.name, '-') }}</td>
          </tr>
          {% endfor %}
        </table>
        <input type="submit" value="Add Points" {% if game_over_message %}disabled{% endif %} />
      </form>
      {% if error_message %}
      <div class="alert alert-danger" role="alert">{{ error_message }}</div>
      {% endif %}
    </div>
  </div>
</div>
{% include 'footer.html' %}
